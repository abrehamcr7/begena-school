<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Begena School - በገና ትምህርት ቤት</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ====== CSS STYLES ====== */
        :root {
            --green: #078C03;
            --yellow: #FCDD09;
            --red: #DA1212;
            --dark: #2C2C2C;
            --light: #f8f9fa;
            --shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Noto Sans Ethiopic', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            min-height: 100vh;
            padding-top: 80px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* ===== HEADER ===== */
        header {
            background: white;
            box-shadow: var(--shadow);
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1000;
            border-bottom: 3px solid var(--green);
        }
        
        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .ethiopian-cross {
            font-size: 2.5rem;
            color: var(--green);
            background: var(--yellow);
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid var(--red);
        }
        
        .logo h1 {
            color: var(--dark);
            font-size: 1.8rem;
        }
        
        .logo .subtitle {
            color: var(--green);
            font-size: 0.9rem;
            font-weight: bold;
        }
        
        nav {
            display: flex;
            gap: 10px;
        }
        
        nav a {
            text-decoration: none;
            color: var(--dark);
            padding: 10px 15px;
            border-radius: 5px;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
            font-weight: 500;
        }
        
        nav a:hover, nav a.active {
            background: var(--green);
            color: white;
        }
        
        .menu-toggle {
            display: none;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--green);
        }
        
        /* ===== MAIN CONTENT ===== */
        .main-content {
            display: none;
            animation: fadeIn 0.5s;
        }
        
        .main-content.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* ===== HOMEPAGE ===== */
        .hero {
            background: linear-gradient(rgba(255,255,255,0.9), rgba(255,255,255,0.9)), 
                        url('https://upload.wikimedia.org/wikipedia/commons/thumb/7/7e/Begena.jpg/800px-Begena.jpg');
            background-size: cover;
            background-position: center;
            padding: 100px 20px;
            text-align: center;
            border-radius: 10px;
            margin: 20px;
            border: 3px solid var(--yellow);
        }
        
        .hero h2 {
            font-size: 2.5rem;
            color: var(--green);
            margin-bottom: 20px;
        }
        
        .amharic {
            font-family: 'Noto Sans Ethiopic', sans-serif;
            font-size: 1.2rem;
            color: var(--dark);
            margin-bottom: 20px;
        }
        
        .hero-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 30px;
        }
        
        .btn {
            padding: 12px 30px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: bold;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
            border: 2px solid transparent;
        }
        
        .btn.primary {
            background: var(--green);
            color: white;
        }
        
        .btn.secondary {
            background: white;
            color: var(--green);
            border-color: var(--green);
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow);
        }
        
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            padding: 40px 20px;
        }
        
        .feature-card {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: var(--shadow);
            text-align: center;
            border-top: 5px solid var(--green);
            transition: transform 0.3s;
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
        }
        
        .feature-icon {
            font-size: 2.5rem;
            color: var(--green);
            margin-bottom: 20px;
        }
        
        /* ===== ATTENDANCE PAGE ===== */
        .attendance-container {
            background: white;
            border-radius: 10px;
            padding: 30px;
            margin: 20px;
            box-shadow: var(--shadow);
        }
        
        .date-selector {
            display: flex;
            gap: 20px;
            align-items: center;
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }
        
        input[type="date"], select {
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }
        
        .attendance-list {
            display: grid;
            gap: 10px;
        }
        
        .attendance-item {
            display: flex;
            align-items: center;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            transition: all 0.3s;
        }
        
        .attendance-item:hover {
            background: #e9ecef;
        }
        
        .student-name {
            flex: 1;
            font-weight: 500;
        }
        
        .attendance-options {
            display: flex;
            gap: 10px;
        }
        
        .attendance-btn {
            padding: 8px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .present {
            background: #d4edda;
            color: #155724;
        }
        
        .absent {
            background: #f8d7da;
            color: #721c24;
        }
        
        /* ===== MARKLIST PAGE ===== */
        .marklist-container {
            background: white;
            border-radius: 10px;
            padding: 30px;
            margin: 20px;
            box-shadow: var(--shadow);
        }
        
        .marklist-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }
        
        .marklist-table-container {
            overflow-x: auto;
            margin: 20px 0;
            border-radius: 8px;
            border: 1px solid #ddd;
        }
        
        .marklist-table {
            width: 100%;
            border-collapse: collapse;
            min-width: 800px;
        }
        
        .marklist-table th {
            background: var(--green);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
            position: sticky;
            top: 0;
        }
        
        .marklist-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #eee;
        }
        
        .marklist-table tr:hover {
            background: #f8f9fa;
        }
        
        .marklist-table tr:nth-child(even) {
            background: #fafafa;
        }
        
        .mark-input {
            width: 80px;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            text-align: center;
            font-size: 1rem;
        }
        
        .grade {
            font-weight: bold;
            padding: 5px 10px;
            border-radius: 4px;
            display: inline-block;
        }
        
        .grade-A { background: #d4edda; color: #155724; }
        .grade-B { background: #d1ecf1; color: #0c5460; }
        .grade-C { background: #fff3cd; color: #856404; }
        .grade-D { background: #f8d7da; color: #721c24; }
        
        .add-assessment-btn {
            background: var(--green);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            margin-top: 20px;
        }
        
        /* ===== NOTICE BOARD ===== */
        .notice-form {
            background: white;
            padding: 30px;
            border-radius: 10px;
            margin: 20px;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark);
        }
        
        .form-group input, .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }
        
        .form-group textarea {
            min-height: 150px;
            resize: vertical;
        }
        
        .notices-container {
            padding: 20px;
        }
        
        .notice-card {
            background: white;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
            border-left: 5px solid var(--green);
            position: relative;
        }
        
        .notice-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .notice-title {
            font-size: 1.3rem;
            color: var(--dark);
            font-weight: 600;
        }
        
        .notice-date {
            color: #666;
            font-size: 0.9rem;
        }
        
        .notice-content {
            color: #555;
            line-height: 1.6;
        }
        
        .delete-notice {
            position: absolute;
            top: 15px;
            right: 15px;
            background: #ff6b6b;
            color: white;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* ===== TEACHERS & STUDENTS ===== */
        .people-container {
            padding: 20px;
        }
        
        .add-form {
            background: white;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: var(--shadow);
        }
        
        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }
        
        .people-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
        }
        
        .person-card {
            background: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: var(--shadow);
            text-align: center;
            border-top: 5px solid var(--green);
        }
        
        .person-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--green), var(--yellow));
            border-radius: 50%;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: white;
        }
        
        .person-name {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--dark);
        }
        
        .person-details {
            color: #666;
            margin-bottom: 15px;
            line-height: 1.5;
        }
        
        .delete-person {
            background: #ff6b6b;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 500;
            transition: background 0.3s;
        }
        
        .delete-person:hover {
            background: #ff5252;
        }
        
        /* ===== FOOTER ===== */
        footer {
            background: var(--dark);
            color: white;
            padding: 40px 20px;
            margin-top: 50px;
            border-top: 5px solid var(--green);
        }
        
        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
        }
        
        .footer-section h3 {
            color: var(--yellow);
            margin-bottom: 20px;
            font-size: 1.3rem;
        }
        
        .footer-links {
            list-style: none;
        }
        
        .footer-links li {
            margin-bottom: 10px;
        }
        
        .footer-links a {
            color: #ddd;
            text-decoration: none;
            transition: color 0.3s;
        }
        
        .footer-links a:hover {
            color: var(--yellow);
        }
        
        /* ===== UTILITY CLASSES ===== */
        .section-title {
            font-size: 2rem;
            color: var(--green);
            margin: 30px 0 20px;
            text-align: center;
        }
        
        .section-subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 40px;
            font-size: 1.1rem;
        }
        
        /* ===== RESPONSIVE DESIGN ===== */
        @media (max-width: 768px) {
            nav {
                display: none;
                flex-direction: column;
                position: absolute;
                top: 100%;
                left: 0;
                right: 0;
                background: white;
                padding: 20px;
                box-shadow: var(--shadow);
            }
            
            nav.show {
                display: flex;
            }
            
            .menu-toggle {
                display: block;
            }
            
            .hero-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .header-container {
                flex-wrap: wrap;
            }
            
            .marklist-controls {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- HEADER -->
    <header>
        <div class="header-container">
            <div class="logo">
                <div class="ethiopian-cross">ተ</div>
                <div>
                    <h1>ዘዳዊት በገና</h1>
                    <p class="subtitle">በገና ትምህርት ቤት</p>
                </div>
            </div>
            
            <nav id="mainNav">
                <a href="#" onclick="showPage('home')" class="active"><i class="fas fa-home"></i> Home</a>
                <a href="#" onclick="showPage('attendance')"><i class="fas fa-calendar-check"></i> Attendance</a>
                <a href="#" onclick="showPage('marklist')"><i class="fas fa-chart-bar"></i> Marklist</a>
                <a href="#" onclick="showPage('notices')"><i class="fas fa-bullhorn"></i> Notices</a>
                <a href="#" onclick="showPage('teachers')"><i class="fas fa-users"></i> Teachers</a>
                <a href="#" onclick="showPage('students')"><i class="fas fa-user-graduate"></i> Students</a>
            </nav>
            
            <button class="menu-toggle" onclick="toggleMenu()">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </header>

    <!-- MAIN CONTENT AREA -->
    <main class="container">
        <!-- HOMEPAGE -->
        <div id="home" class="main-content active">
            <section class="hero">
                <h2>Learn Ethiopia's Sacred Harp</h2>
                <p class="amharic">የኢትዮጵያ ቅዱስ በገና መማር ይፈልጋሉ?</p>
                <p>Join our Sunday school program to learn begena, the traditional instrument of prayer and meditation.</p>
                <div class="hero-buttons">
                    <a href="#" onclick="showPage('notices')" class="btn primary"><i class="fas fa-info-circle"></i> Latest Notices</a>
                    <a href="#" onclick="showPage('students')" class="btn secondary"><i class="fas fa-user-plus"></i> Register Student</a>
                </div>
            </section>

            <h2 class="section-title">School Features</h2>
            <p class="section-subtitle">Everything you need to manage your begena classes</p>
            
            <div class="features">
                <div class="feature-card">
                    <div class="feature-icon"><i class="fas fa-calendar-check"></i></div>
                    <h3>Attendance Tracker</h3>
                    <p>Mark student attendance easily. View monthly reports and statistics.</p>
                    <a href="#" onclick="showPage('attendance')" class="btn secondary" style="margin-top: 15px;">Go to Attendance</a>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon"><i class="fas fa-chart-bar"></i></div>
                    <h3>Marklist System</h3>
                    <p>Record marks for hymns, exams. Generate progress reports and grades.</p>
                    <a href="#" onclick="showPage('marklist')" class="btn secondary" style="margin-top: 15px;">View Marklist</a>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon"><i class="fas fa-bullhorn"></i></div>
                    <h3>Digital Notice Board</h3>
                    <p>Post announcements, updates, and important notices for everyone.</p>
                    <a href="#" onclick="showPage('notices')" class="btn secondary" style="margin-top: 15px;">View Notices</a>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon"><i class="fas fa-users"></i></div>
                    <h3>Teacher Management</h3>
                    <p>Add, edit, and manage teachers. Assign students to teachers.</p>
                    <a href="#" onclick="showPage('teachers')" class="btn secondary" style="margin-top: 15px;">Manage Teachers</a>
                </div>
            </div>
        </div>

        <!-- ATTENDANCE PAGE -->
        <div id="attendance" class="main-content">
            <div class="attendance-container">
                <h2 class="section-title">Attendance Tracker</h2>
                <p class="section-subtitle">Mark student attendance for each class</p>
                
                <div class="date-selector">
                    <div>
                        <label>Select Date:</label>
                        <input type="date" id="attendanceDate" value="">
                    </div>
                    <div>
                        <label>Select Class:</label>
                        <select id="classSelect">
                            <option value="beginner">Beginner Class</option>
                            <option value="intermediate">Intermediate Class</option>
                            <option value="advanced">Advanced Class</option>
                        </select>
                    </div>
                    <button class="btn primary" onclick="saveAttendance()">
                        <i class="fas fa-save"></i> Save Attendance
                    </button>
                </div>
                
                <h3>Mark Attendance:</h3>
                <div class="attendance-list" id="attendanceList">
                    <!-- Attendance list will be loaded here -->
                </div>
            </div>
        </div>

        <!-- MARKLIST PAGE -->
        <div id="marklist" class="main-content">
            <div class="marklist-container">
                <h2 class="section-title">Student Marklist & Progress Reports</h2>
                <p class="section-subtitle">Record marks for hymns, exams, and track student progress</p>
                
                <div class="marklist-controls">
                    <div>
                        <label>Select Student:</label>
                        <select id="marklistStudent" onchange="loadStudentMarklist()">
                            <option value="">All Students</option>
                        </select>
                    </div>
                    <div>
                        <label>Select Term:</label>
                        <select id="marklistTerm">
                            <option value="term1">Term 1 - Basic Hymns</option>
                            <option value="term2">Term 2 - Intermediate Hymns</option>
                            <option value="term3">Term 3 - Advanced Hymns</option>
                            <option value="final">Final Exam</option>
                        </select>
                    </div>
                    <div>
                        <label>Add Assessment:</label>
                        <select id="newAssessmentType">
                            <option value="hymn">Hymn Performance</option>
                            <option value="theory">Music Theory</option>
                            <option value="qenet">Qenet (Scales)</option>
                            <option value="practical">Practical Exam</option>
                        </select>
                    </div>
                </div>
                
                <button class="btn primary" onclick="addAssessment()">
                    <i class="fas fa-plus"></i> Add New Assessment
                </button>
                
                <div class="marklist-table-container">
                    <table class="marklist-table" id="marklistTable">
                        <thead>
                            <tr>
                                <th>Student Name</th>
                                <th>Hymn 1<br>tezeta (10)</th>
                                <th>Hymn 2<br>Selamta (10)</th>
                                <th>Music Theory (20)</th>
                                <th>Qenet Test (15)</th>
                                <th>Practical (25)</th>
                                <th>Total (80)</th>
                                <th>Percentage</th>
                                <th>Grade</th>
                                <th>Remarks</th>
                            </tr>
                        </thead>
                        <tbody id="marklistTableBody">
                            <!-- Marklist data will be loaded here -->
                        </tbody>
                    </table>
                </div>
                
                <div style="margin-top: 30px; display: flex; gap: 20px; justify-content: center;">
                    <button class="btn primary" onclick="saveMarklist()">
                        <i class="fas fa-save"></i> Save All Marks
                    </button>
                    <button class="btn secondary" onclick="printMarklist()">
                        <i class="fas fa-print"></i> Print Report
                    </button>
                    <button class="btn secondary" onclick="exportMarklist()">
                        <i class="fas fa-download"></i> Export to Excel
                    </button>
                </div>
                
                <div id="studentProgressChart" style="margin-top: 40px; background: white; padding: 20px; border-radius: 10px; box-shadow: var(--shadow);">
                    <h3>Student Progress Overview</h3>
                    <div id="progressChart" style="height: 300px; display: flex; align-items: flex-end; gap: 10px; margin-top: 20px; padding: 20px; border: 1px solid #eee; border-radius: 8px;">
                        <!-- Progress bars will be shown here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- NOTICE BOARD PAGE -->
        <div id="notices" class="main-content">
            <div class="notice-form">
                <h2>Post New Notice</h2>
                <div class="form-group">
                    <label>Notice Title:</label>
                    <input type="text" id="noticeTitle" placeholder="Enter notice title">
                </div>
                <div class="form-group">
                    <label>Notice Content:</label>
                    <textarea id="noticeContent" placeholder="Write your notice here..."></textarea>
                </div>
                <div class="form-group">
                    <label>Priority:</label>
                    <select id="noticePriority">
                        <option value="normal">Normal</option>
                        <option value="important">Important</option>
                        <option value="urgent">Urgent</option>
                    </select>
                </div>
                <button class="btn primary" onclick="addNotice()">
                    <i class="fas fa-paper-plane"></i> Post Notice
                </button>
            </div>
            
            <h2 class="section-title">Notice Board</h2>
            <div class="notices-container" id="noticesContainer">
                <!-- Notices will be loaded here -->
            </div>
        </div>

        <!-- TEACHERS PAGE -->
        <div id="teachers" class="main-content">
            <div class="add-form">
                <h2>Add New Teacher</h2>
                <div class="form-row">
                    <div class="form-group">
                        <label>Full Name:</label>
                        <input type="text" id="teacherName" placeholder="Teacher's full name">
                    </div>
                    <div class="form-group">
                        <label>Specialization:</label>
                        <select id="teacherSpecialization">
                            <option value="begena">Begena Playing</option>
                            <option value="zema">Zema (Chant)</option>
                            <option value="qenet">Qenet (Scales)</option>
                            <option value="theory">Music Theory</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Contact Info:</label>
                    <input type="text" id="teacherContact" placeholder="Phone or email">
                </div>
                <button class="btn primary" onclick="addTeacher()">
                    <i class="fas fa-user-plus"></i> Add Teacher
                </button>
            </div>
            
            <h2 class="section-title">Our Teachers</h2>
            <div class="people-grid" id="teachersGrid">
                <!-- Teachers will be loaded here -->
            </div>
        </div>

        <!-- STUDENTS PAGE -->
        <div id="students" class="main-content">
            <div class="add-form">
                <h2>Register New Student</h2>
                <div class="form-row">
                    <div class="form-group">
                        <label>Full Name:</label>
                        <input type="text" id="studentName" placeholder="Student's full name">
                    </div>
                    <div class="form-group">
                        <label>Age:</label>
                        <input type="number" id="studentAge" placeholder="Age" min="8" max="60">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Class Level:</label>
                        <select id="studentLevel">
                            <option value="beginner">Beginner</option>
                            <option value="intermediate">Intermediate</option>
                            <option value="advanced">Advanced</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Assigned Teacher:</label>
                        <select id="studentTeacher">
                            <option value="">Select Teacher</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Contact (Parent/Student):</label>
                    <input type="text" id="studentContact" placeholder="Phone number or email">
                </div>
                <button class="btn primary" onclick="addStudent()">
                    <i class="fas fa-user-plus"></i> Register Student
                </button>
            </div>
            
            <h2 class="section-title">Registered Students</h2>
            <div class="people-grid" id="studentsGrid">
                <!-- Students will be loaded here -->
            </div>
        </div>
    </main>

    <!-- FOOTER -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Begena School</h3>
                    <p>Preserving Ethiopia's sacred harp tradition through education and community.</p>
                    <p class="amharic">የኢትዮጵያ ቅዱስ በገና ትምህርት ቤት</p>
                </div>
                
                <div class="footer-section">
                    <h3>Quick Links</h3>
                    <ul class="footer-links">
                        <li><a href="#" onclick="showPage('home')">Home</a></li>
                        <li><a href="#" onclick="showPage('attendance')">Attendance</a></li>
                        <li><a href="#" onclick="showPage('marklist')">Marklist</a></li>
                        <li><a href="#" onclick="showPage('notices')">Notice Board</a></li>
                        <li><a href="#" onclick="showPage('teachers')">Teachers</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h3>Contact Info</h3>
                    <p><i class="fas fa-church"></i> Sunday School Program</p>
                    <p><i class="fas fa-envelope"></i> abrehamcr7@gmail.com</p>
                    <p><i class="fas fa-phone"></i> +251 9 52336591</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- ====== JAVASCRIPT ====== -->
    <script>
        // ===== DATA STORAGE =====
        let teachers = JSON.parse(localStorage.getItem('begenaTeachers')) || [
            {id: 1, name: "Ato Melaku", specialization: "Begena Playing", contact: "+251 91 123 4567"},
            {id: 2, name: "W/o Selam", specialization: "Zema (Chant)", contact: "selam@begena.com"}
        ];
        
        let students = JSON.parse(localStorage.getItem('begenaStudents')) || [
            {id: 1, name: "Dawit Mekonnen", age: 15, level: "beginner", teacher: "Ato Melaku", contact: "dawit@email.com"},
            {id: 2, name: "Sara Tesfaye", age: 18, level: "intermediate", teacher: "W/o Selam", contact: "+251 92 234 5678"}
        ];
        
        let notices = JSON.parse(localStorage.getItem('begenaNotices')) || [
            {id: 1, title: "Welcome to Begena School", content: "New classes start every Sunday at 4 PM. Bring your begena if you have one.", date: "2024-01-15", priority: "important"},
            {id: 2, title: "Meskel Performance Practice", content: "Practice for Meskel celebration will be on Wednesday at 5 PM. All students must attend.", date: "2024-01-10", priority: "urgent"}
        ];
        
        let attendance = JSON.parse(localStorage.getItem('begenaAttendance')) || {};
        
        // ===== MARKLIST DATA =====
        let marklist = JSON.parse(localStorage.getItem('begenaMarklist')) || {
            assessments: [
                {id: 1, name: "Mizaber Hymn", maxMarks: 10, type: "hymn"},
                {id: 2, name: "Selamta Hymn", maxMarks: 10, type: "hymn"},
                {id: 3, name: "Music Theory", maxMarks: 20, type: "theory"},
                {id: 4, name: "Qenet Test", maxMarks: 15, type: "qenet"},
                {id: 5, name: "Practical Exam", maxMarks: 25, type: "practical"}
            ],
            studentMarks: {}
        };

        // ===== INITIALIZE PAGE =====
        document.addEventListener('DOMContentLoaded', function() {
            // Set today's date in attendance date picker
            document.getElementById('attendanceDate').valueAsDate = new Date();
            
            // Load teacher options for student registration
            loadTeacherOptions();
            loadStudentOptions();
            
            // Load initial data
            loadTeachers();
            loadStudents();
            loadNotices();
            loadAttendanceList();
            loadMarklist();
            
            // Show homepage by default
            showPage('home');
        });

        // ===== PAGE NAVIGATION =====
        function showPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.main-content').forEach(page => {
                page.classList.remove('active');
            });
            
            // Show selected page
            document.getElementById(pageId).classList.add('active');
            
            // Update active nav link
            document.querySelectorAll('#mainNav a').forEach(link => {
                link.classList.remove('active');
            });
            
            // Close mobile menu
            document.getElementById('mainNav').classList.remove('show');
            
            // Load page-specific data
            if (pageId === 'attendance') {
                loadAttendanceList();
            } else if (pageId === 'teachers') {
                loadTeachers();
            } else if (pageId === 'students') {
                loadStudents();
            } else if (pageId === 'notices') {
                loadNotices();
            } else if (pageId === 'marklist') {
                loadMarklist();
                updateProgressChart();
            }
        }

        function toggleMenu() {
            const nav = document.getElementById('mainNav');
            nav.classList.toggle('show');
        }

        // ===== TEACHER FUNCTIONS =====
        function loadTeacherOptions() {
            const select = document.getElementById('studentTeacher');
            select.innerHTML = '<option value="">Select Teacher</option>';
            
            teachers.forEach(teacher => {
                const option = document.createElement('option');
                option.value = teacher.name;
                option.textContent = teacher.name + ' (' + teacher.specialization + ')';
                select.appendChild(option);
            });
        }

        function addTeacher() {
            const name = document.getElementById('teacherName').value.trim();
            const specialization = document.getElementById('teacherSpecialization').value;
            const contact = document.getElementById('teacherContact').value.trim();
            
            if (!name || !contact) {
                alert('Please fill in all required fields');
                return;
            }
            
            const newTeacher = {
                id: Date.now(),
                name: name,
                specialization: specialization,
                contact: contact
            };
            
            teachers.push(newTeacher);
            saveTeachers();
            
            // Clear form
            document.getElementById('teacherName').value = '';
            document.getElementById('teacherContact').value = '';
            
            // Reload teachers
            loadTeachers();
            loadTeacherOptions();
            
            alert('Teacher added successfully!');
        }

        function loadTeachers() {
            const container = document.getElementById('teachersGrid');
            container.innerHTML = '';
            
            if (teachers.length === 0) {
                container.innerHTML = '<p style="text-align: center; grid-column: 1/-1; color: #666;">No teachers registered yet.</p>';
                return;
            }
            
            teachers.forEach(teacher => {
                const card = document.createElement('div');
                card.className = 'person-card';
                card.innerHTML = `
                    <div class="person-icon">
                        <i class="fas fa-chalkboard-teacher"></i>
                    </div>
                    <h3 class="person-name">${teacher.name}</h3>
                    <div class="person-details">
                        <p><strong>Specialization:</strong> ${teacher.specialization}</p>
                        <p><strong>Contact:</strong> ${teacher.contact}</p>
                    </div>
                    <button class="delete-person" onclick="deleteTeacher(${teacher.id})">
                        <i class="fas fa-trash"></i> Remove
                    </button>
                `;
                container.appendChild(card);
            });
        }

        function deleteTeacher(id) {
            if (confirm('Are you sure you want to remove this teacher?')) {
                teachers = teachers.filter(teacher => teacher.id !== id);
                saveTeachers();
                loadTeachers();
                loadTeacherOptions();
            }
        }

        // ===== STUDENT FUNCTIONS =====
        function loadStudentOptions() {
            const select = document.getElementById('marklistStudent');
            select.innerHTML = '<option value="">All Students</option>';
            
            students.forEach(student => {
                const option = document.createElement('option');
                option.value = student.id;
                option.textContent = student.name;
                select.appendChild(option);
            });
        }

        function addStudent() {
            const name = document.getElementById('studentName').value.trim();
            const age = document.getElementById('studentAge').value;
            const level = document.getElementById('studentLevel').value;
            const teacher = document.getElementById('studentTeacher').value;
            const contact = document.getElementById('studentContact').value.trim();
            
            if (!name || !age || !contact) {
                alert('Please fill in all required fields');
                return;
            }
            
            const newStudent = {
                id: Date.now(),
                name: name,
                age: parseInt(age),
                level: level,
                teacher: teacher,
                contact: contact
            };
            
            students.push(newStudent);
            saveStudents();
            
            // Clear form
            document.getElementById('studentName').value = '';
            document.getElementById('studentAge').value = '';
            document.getElementById('studentContact').value = '';
            
            // Reload students
            loadStudents();
            loadStudentOptions();
            
            alert('Student registered successfully!');
        }

        function loadStudents() {
            const container = document.getElementById('studentsGrid');
            container.innerHTML = '';
            
            if (students.length === 0) {
                container.innerHTML = '<p style="text-align: center; grid-column: 1/-1; color: #666;">No students registered yet.</p>';
                return;
            }
            
            students.forEach(student => {
                const card = document.createElement('div');
                card.className = 'person-card';
                card.innerHTML = `
                    <div class="person-icon">
                        <i class="fas fa-user-graduate"></i>
                    </div>
                    <h3 class="person-name">${student.name}</h3>
                    <div class="person-details">
                        <p><strong>Age:</strong> ${student.age}</p>
                        <p><strong>Level:</strong> ${student.level}</p>
                        <p><strong>Teacher:</strong> ${student.teacher || 'Not assigned'}</p>
                        <p><strong>Contact:</strong> ${student.contact}</p>
                    </div>
                    <button class="delete-person" onclick="deleteStudent(${student.id})">
                        <i class="fas fa-trash"></i> Remove
                    </button>
                `;
                container.appendChild(card);
            });
        }

        function deleteStudent(id) {
            if (confirm('Are you sure you want to remove this student?')) {
                students = students.filter(student => student.id !== id);
                saveStudents();
                loadStudents();
                loadStudentOptions();
                loadMarklist();
            }
        }

        // ===== MARKLIST FUNCTIONS =====
        function addAssessment() {
            const type = document.getElementById('newAssessmentType').value;
            const typeNames = {
                'hymn': 'Hymn Performance',
                'theory': 'Music Theory',
                'qenet': 'Qenet Test',
                'practical': 'Practical Exam'
            };
            
            const maxMarks = {
                'hymn': 10,
                'theory': 20,
                'qenet': 15,
                'practical': 25
            };
            
            const newAssessment = {
                id: Date.now(),
                name: typeNames[type],
                maxMarks: maxMarks[type],
                type: type
            };
            
            marklist.assessments.push(newAssessment);
            saveMarklistData();
            loadMarklist();
            
            alert(`New assessment "${typeNames[type]}" added!`);
        }

        function loadMarklist() {
            const tableBody = document.getElementById('marklistTableBody');
            tableBody.innerHTML = '';
            
            // Update table headers
            const tableHeader = document.querySelector('#marklistTable thead tr');
            tableHeader.innerHTML = `
                <th>Student Name</th>
                ${marklist.assessments.map(a => `<th>${a.name}<br>(${a.maxMarks})</th>`).join('')}
                <th>Total</th>
                <th>Percentage</th>
                <th>Grade</th>
                <th>Remarks</th>
            `;
            
            if (students.length === 0) {
                tableBody.innerHTML = `
                    <tr>
                        <td colspan="${marklist.assessments.length + 5}" style="text-align: center; padding: 40px; color: #666;">
                            No students registered yet. Add students first.
                        </td>
                    </tr>
                `;
                return;
            }
            
            let totalMaxMarks = marklist.assessments.reduce((sum, a) => sum + a.maxMarks, 0);
            
            students.forEach(student => {
                const studentId = student.id;
                const studentMarks = marklist.studentMarks[studentId] || {};
                
                let rowHTML = `<tr><td><strong>${student.name}</strong><br><small>${student.level}</small></td>`;
                
                let totalObtained = 0;
                
                // Add input cells for each assessment
                marklist.assessments.forEach(assessment => {
                    const mark = studentMarks[assessment.id] || 0;
                    totalObtained += mark;
                    
                    rowHTML += `
                        <td>
                            <input type="number" 
                                   class="mark-input" 
                                   value="${mark}" 
                                   min="0" 
                                   max="${assessment.maxMarks}"
                                   onchange="updateMark(${studentId}, ${assessment.id}, this.value)"
                                   style="width: 60px;">
                            <br><small>/${assessment.maxMarks}</small>
                        </td>
                    `;
                });
                
                // Calculate percentage and grade
                const percentage = totalMaxMarks > 0 ? Math.round((totalObtained / totalMaxMarks) * 100) : 0;
                const grade = calculateGrade(percentage);
                const remarks = getRemarks(percentage);
                
                rowHTML += `
                    <td><strong>${totalObtained}/${totalMaxMarks}</strong></td>
                    <td><strong>${percentage}%</strong></td>
                    <td><span class="grade grade-${grade}">${grade}</span></td>
                    <td><small>${remarks}</small></td>
                `;
                
                rowHTML += '</tr>';
                tableBody.innerHTML += rowHTML;
            });
        }

        function updateMark(studentId, assessmentId, mark) {
            mark = parseInt(mark) || 0;
            
            if (!marklist.studentMarks[studentId]) {
                marklist.studentMarks[studentId] = {};
            }
            
            // Get assessment max marks
            const assessment = marklist.assessments.find(a => a.id === assessmentId);
            if (assessment && mark > assessment.maxMarks) {
                mark = assessment.maxMarks;
            }
            
            marklist.studentMarks[studentId][assessmentId] = mark;
            
            // Auto-save
            saveMarklistData();
            
            // Update display
            loadMarklist();
            updateProgressChart();
        }

        function calculateGrade(percentage) {
            if (percentage >= 90) return 'A';
            if (percentage >= 80) return 'B';
            if (percentage >= 70) return 'C';
            if (percentage >= 60) return 'D';
            return 'F';
        }

        function getRemarks(percentage) {
            if (percentage >= 90) return 'Excellent! Keep it up';
            if (percentage >= 80) return 'Very Good';
            if (percentage >= 70) return 'Good, needs practice';
            if (percentage >= 60) return 'Pass, needs improvement';
            return 'Needs more practice';
        }

        function saveMarklist() {
            saveMarklistData();
            alert('All marks saved successfully!');
        }

        function loadStudentMarklist() {
            const studentId = document.getElementById('marklistStudent').value;
            loadMarklist();
            updateProgressChart();
        }

        function updateProgressChart() {
            const chartContainer = document.getElementById('progressChart');
            chartContainer.innerHTML = '';
            
            const selectedStudentId = document.getElementById('marklistStudent').value;
            const studentsToShow = selectedStudentId ? 
                students.filter(s => s.id == selectedStudentId) : 
                students.slice(0, 5); // Show first 5 students
            
            if (studentsToShow.length === 0) {
                chartContainer.innerHTML = '<p style="text-align: center; width: 100%; color: #666;">No student data to display</p>';
                return;
            }
            
            const maxHeight = 250;
            const barWidth = Math.min(60, (chartContainer.clientWidth - 100) / studentsToShow.length);
            
            studentsToShow.forEach(student => {
                const studentId = student.id;
                const studentMarks = marklist.studentMarks[studentId] || {};
                
                // Calculate total percentage
                let totalObtained = 0;
                let totalMax = 0;
                
                marklist.assessments.forEach(assessment => {
                    totalObtained += studentMarks[assessment.id] || 0;
                    totalMax += assessment.maxMarks;
                });
                
                const percentage = totalMax > 0 ? (totalObtained / totalMax) * 100 : 0;
                const barHeight = (percentage / 100) * maxHeight;
                
                const bar = document.createElement('div');
                bar.style.cssText = `
                    width: ${barWidth}px;
                    height: ${barHeight}px;
                    background: linear-gradient(to top, var(--green), var(--yellow));
                    border-radius: 5px 5px 0 0;
                    position: relative;
                    display: flex;
                    align-items: flex-end;
                    justify-content: center;
                `;
                
                bar.innerHTML = `
                    <div style="position: absolute; bottom: -30px; text-align: center; font-size: 12px; width: ${barWidth * 1.5}px; left: -${barWidth * 0.25}px;">
                        <div style="font-weight: bold; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">${student.name.split(' ')[0]}</div>
                        <div style="color: var(--green); font-weight: bold;">${Math.round(percentage)}%</div>
                    </div>
                `;
                
                chartContainer.appendChild(bar);
            });
        }

        function printMarklist() {
            const printWindow = window.open('', '_blank');
            const selectedStudentId = document.getElementById('marklistStudent').value;
            const selectedStudent = selectedStudentId ? students.find(s => s.id == selectedStudentId) : null;
            
            let printContent = `
                <html>
                <head>
                    <title>Begena School Marklist Report</title>
                    <style>
                        body { font-family: Arial, sans-serif; margin: 40px; }
                        h1 { color: #078C03; text-align: center; }
                        h2 { color: #2C2C2C; }
                        .header { text-align: center; margin-bottom: 30px; }
                        .ethiopian-cross { font-size: 2em; }
                        table { width: 100%; border-collapse: collapse; margin: 20px 0; }
                        th { background: #078C03; color: white; padding: 12px; text-align: left; }
                        td { padding: 10px; border: 1px solid #ddd; }
                        .grade-A { background: #d4edda; padding: 5px 10px; border-radius: 3px; }
                        .footer { margin-top: 40px; text-align: center; color: #666; font-size: 0.9em; }
                    </style>
                </head>
                <body>
                    <div class="header">
                        <div class="ethiopian-cross">መ</div>
                        <h1>Begena School - Marklist Report</h1>
                        <p>በገና ትምህርት ቤት - የምዘና ሪፖርት</p>
                        <p>Generated on: ${new Date().toLocaleDateString()}</p>
                    </div>
            `;
            
            if (selectedStudent) {
                // Single student report
                const studentMarks = marklist.studentMarks[selectedStudent.id] || {};
                let totalObtained = 0;
                let totalMax = 0;
                
                printContent += `
                    <h2>Student: ${selectedStudent.name}</h2>
                    <p>Age: ${selectedStudent.age} | Level: ${selectedStudent.level} | Teacher: ${selectedStudent.teacher}</p>
                    
                    <table>
                        <thead>
                            <tr>
                                <th>Assessment</th>
                                <th>Marks Obtained</th>
                                <th>Maximum Marks</th>
                                <th>Percentage</th>
                            </tr>
                        </thead>
                        <tbody>
                `;
                
                marklist.assessments.forEach(assessment => {
                    const mark = studentMarks[assessment.id] || 0;
                    const percentage = Math.round((mark / assessment.maxMarks) * 100);
                    totalObtained += mark;
                    totalMax += assessment.maxMarks;
                    
                    printContent += `
                        <tr>
                            <td>${assessment.name}</td>
                            <td>${mark}</td>
                            <td>${assessment.maxMarks}</td>
                            <td>${percentage}%</td>
                        </tr>
                    `;
                });
                
                const overallPercentage = totalMax > 0 ? Math.round((totalObtained / totalMax) * 100) : 0;
                const grade = calculateGrade(overallPercentage);
                const remarks = getRemarks(overallPercentage);
                
                printContent += `
                        <tr style="font-weight: bold; background: #f8f9fa;">
                            <td>TOTAL</td>
                            <td>${totalObtained}</td>
                            <td>${totalMax}</td>
                            <td>${overallPercentage}%</td>
                        </tr>
                    </tbody>
                    </table>
                    
                    <div style="margin: 30px 0;">
                        <h3>Final Result</h3>
                        <p><strong>Overall Percentage:</strong> ${overallPercentage}%</p>
                        <p><strong>Grade:</strong> <span class="grade-${grade}">${grade}</span></p>
                        <p><strong>Remarks:</strong> ${remarks}</p>
                    </div>
                `;
            } else {
                // All students report
                printContent += `<h2>Class Marklist Summary</h2>`;
                
                marklist.assessments.forEach(assessment => {
                    printContent += `<h3>${assessment.name} Results</h3>`;
                    printContent += `<table><thead><tr><th>Student</th><th>Marks</th><th>Percentage</th></tr></thead><tbody>`;
                    
                    students.forEach(student => {
                        const studentMarks = marklist.studentMarks[student.id] || {};
                        const mark = studentMarks[assessment.id] || 0;
                        const percentage = Math.round((mark / assessment.maxMarks) * 100);
                        
                        printContent += `
                            <tr>
                                <td>${student.name}</td>
                                <td>${mark}/${assessment.maxMarks}</td>
                                <td>${percentage}%</td>
                            </tr>
                        `;
                    });
                    
                    printContent += `</tbody></table>`;
                });
            }
            
            printContent += `
                    <div class="footer">
                        <p>Begena School - Preserving Ethiopia's Sacred Harp Tradition</p>
                        <p>Contact: begenschool@example.com | Phone: +251 XXX XXX XXX</p>
                    </div>
                </body>
                </html>
            `;
            
            printWindow.document.write(printContent);
            printWindow.document.close();
            printWindow.print();
        }

        function exportMarklist() {
            const data = [];
            const headers = ['Student Name', 'Age', 'Level', 'Teacher', ...marklist.assessments.map(a => a.name), 'Total', 'Percentage', 'Grade', 'Remarks'];
            data.push(headers);
            
            let totalMaxMarks = marklist.assessments.reduce((sum, a) => sum + a.maxMarks, 0);
            
            students.forEach(student => {
                const studentId = student.id;
                const studentMarks = marklist.studentMarks[studentId] || {};
                
                let row = [student.name, student.age, student.level, student.teacher];
                
                let totalObtained = 0;
                marklist.assessments.forEach(assessment => {
                    const mark = studentMarks[assessment.id] || 0;
                    row.push(`${mark}/${assessment.maxMarks}`);
                    totalObtained += mark;
                });
                
                const percentage = totalMaxMarks > 0 ? Math.round((totalObtained / totalMaxMarks) * 100) : 0;
                const grade = calculateGrade(percentage);
                const remarks = getRemarks(percentage);
                
                row.push(`${totalObtained}/${totalMaxMarks}`, `${percentage}%`, grade, remarks);
                data.push(row);
            });
            
            // Convert to CSV
            const csv = data.map(row => row.join(',')).join('\n');
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `begena-marklist-${new Date().toISOString().split('T')[0]}.csv`;
            a.click();
            
            alert('Marklist exported to CSV file!');
        }

        // ===== NOTICE BOARD FUNCTIONS =====
        function addNotice() {
            const title = document.getElementById('noticeTitle').value.trim();
            const content = document.getElementById('noticeContent').value.trim();
            const priority = document.getElementById('noticePriority').value;
            
            if (!title || !content) {
                alert('Please fill in both title and content');
                return;
            }
            
            const newNotice = {
                id: Date.now(),
                title: title,
                content: content,
                date: new Date().toISOString().split('T')[0],
                priority: priority
            };
            
            notices.unshift(newNotice); // Add to beginning
            saveNotices();
            
            // Clear form
            document.getElementById('noticeTitle').value = '';
            document.getElementById('noticeContent').value = '';
            
            // Reload notices
            loadNotices();
            
            alert('Notice posted successfully!');
        }

        function loadNotices() {
            const container = document.getElementById('noticesContainer');
            container.innerHTML = '';
            
            if (notices.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #666;">No notices posted yet.</p>';
                return;
            }
            
            // Sort by date (newest first)
            notices.sort((a, b) => new Date(b.date) - new Date(a.date));
            
            notices.forEach(notice => {
                const card = document.createElement('div');
                card.className = 'notice-card';
                card.style.borderLeftColor = notice.priority === 'urgent' ? '#ff6b6b' : 
                                           notice.priority === 'important' ? '#ffa726' : '#4caf50';
                
                card.innerHTML = `
                    <div class="notice-header">
                        <h3 class="notice-title">${notice.title}</h3>
                        <span class="notice-date">${notice.date}</span>
                    </div>
                    <div class="notice-content">${notice.content.replace(/\n/g, '<br>')}</div>
                    <button class="delete-notice" onclick="deleteNotice(${notice.id})">
                        <i class="fas fa-times"></i>
                    </button>
                `;
                container.appendChild(card);
            });
        }

        function deleteNotice(id) {
            if (confirm('Are you sure you want to delete this notice?')) {
                notices = notices.filter(notice => notice.id !== id);
                saveNotices();
                loadNotices();
            }
        }

        // ===== ATTENDANCE FUNCTIONS =====
        function loadAttendanceList() {
            const container = document.getElementById('attendanceList');
            const selectedClass = document.getElementById('classSelect').value;
            
            // Filter students by class level
            const classStudents = students.filter(student => student.level === selectedClass || selectedClass === 'beginner');
            
            if (classStudents.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #666;">No students in this class.</p>';
                return;
            }
            
            container.innerHTML = '';
            
            classStudents.forEach(student => {
                const item = document.createElement('div');
                item.className = 'attendance-item';
                item.innerHTML = `
                    <div class="student-name">${student.name}</div>
                    <div class="attendance-options">
                        <button class="attendance-btn present" onclick="markAttendance(this, 'present')">Present</button>
                        <button class="attendance-btn absent" onclick="markAttendance(this, 'absent')">Absent</button>
                    </div>
                `;
                container.appendChild(item);
            });
        }

        function markAttendance(button, status) {
            const item = button.closest('.attendance-item');
            const buttons = item.querySelectorAll('.attendance-btn');
            
            // Reset all buttons
            buttons.forEach(btn => {
                btn.style.opacity = '0.6';
                btn.style.transform = 'scale(0.95)';
            });
            
            // Highlight selected button
            button.style.opacity = '1';
            button.style.transform = 'scale(1)';
            button.style.boxShadow = '0 2px 8px rgba(0,0,0,0.2)';
            
            // Store attendance status
            const studentName = item.querySelector('.student-name').textContent;
            const date = document.getElementById('attendanceDate').value;
            const classLevel = document.getElementById('classSelect').value;
            
            if (!attendance[date]) {
                attendance[date] = {};
            }
            if (!attendance[date][classLevel]) {
                attendance[date][classLevel] = {};
            }
            
            attendance[date][classLevel][studentName] = status;
            localStorage.setItem('begenaAttendance', JSON.stringify(attendance));
        }

        function saveAttendance() {
            const date = document.getElementById('attendanceDate').value;
            const classLevel = document.getElementById('classSelect').value;
            
            if (!attendance[date] || !attendance[date][classLevel]) {
                alert('No attendance marked for today');
                return;
            }
            
            alert(`Attendance saved for ${date} (${classLevel} class)`);
        }

        // ===== SAVE FUNCTIONS =====
        function saveTeachers() {
            localStorage.setItem('begenaTeachers', JSON.stringify(teachers));
        }

        function saveStudents() {
            localStorage.setItem('begenaStudents', JSON.stringify(students));
        }

        function saveNotices() {
            localStorage.setItem('begenaNotices', JSON.stringify(notices));
        }

        function saveMarklistData() {
            localStorage.setItem('begenaMarklist', JSON.stringify(marklist));
        }

        // ===== EXPORT/IMPORT DATA =====
        function exportData() {
            const data = {
                teachers: teachers,
                students: students,
                notices: notices,
                attendance: attendance,
                marklist: marklist
            };
            
            const dataStr = JSON.stringify(data, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = 'begena-school-data.json';
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
        }

        function importData() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            
            input.onchange = e => {
                const file = e.target.files[0];
                const reader = new FileReader();
                
                reader.onload = event => {
                    try {
                        const data = JSON.parse(event.target.result);
                        
                        if (data.teachers) teachers = data.teachers;
                        if (data.students) students = data.students;
                        if (data.notices) notices = data.notices;
                        if (data.attendance) attendance = data.attendance;
                        if (data.marklist) marklist = data.marklist;
                        
                        saveTeachers();
                        saveStudents();
                        saveNotices();
                        saveMarklistData();
                        localStorage.setItem('begenaAttendance', JSON.stringify(attendance));
                        
                        loadTeachers();
                        loadStudents();
                        loadNotices();
                        loadTeacherOptions();
                        loadStudentOptions();
                        loadMarklist();
                        updateProgressChart();
                        
                        alert('Data imported successfully!');
                    } catch (error) {
                        alert('Error importing data. Make sure it\'s a valid JSON file.');
                    }
                };
                
                reader.readAsText(file);
            };
            
            input.click();
        }
    </script>
</body>
</html>
